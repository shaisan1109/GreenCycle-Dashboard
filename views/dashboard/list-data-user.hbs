<!-- Entry counter -->
<div class="form-section">
  <div style="display: flex;">
    <p class="entry-count-text">
      Showing <b>{{startEntry}}–{{endEntry}}</b> of <b>{{totalCount}}</b> entries
    </p>
</div>
</div>

{{#ifEquals data.length 0}}
  <div class="form-section">
    <span style="font-size: large;">No entries found.</span>
  </div>
{{/ifEquals}}

{{#each data}}
    <a href="/dashboard/data/{{#ifNotEquals status 'Approved'}}wip/{{/ifNotEquals}}{{data_entry_id}}" class="waste-data-btn-link">
        <div class="form-section waste-data-btn" style="cursor: pointer;">
            
            <!-- Header: Title and Status -->
            <div class="data-entry-header">
            <h2>{{title}}</h2>
            <span class="data-status 
                {{#ifEquals status 'Pending Review'}}stat-pending{{/ifEquals}} 
                {{#ifEquals status 'Approved'}}stat-approved{{/ifEquals}} 
                {{#ifEquals status 'Needs Revision'}}stat-revision{{/ifEquals}}
                {{#ifEquals status 'Revised'}}stat-revised{{/ifEquals}}">
                {{status}}
            </span>
            </div>

            <!-- Main Info -->
            <p>
            <strong>Location:</strong> {{location_name}}<br>
            <i>Submitted on {{textDate date_submitted}}</i>
            </p>

            <p>
            <strong>Submitted by:</strong> {{uppercase lastname}}, {{firstname}}<br>
            <i>{{company_name}}</i>
            </p>

            <p>
            <strong>Collection Period:</strong> {{textDate collection_start}} – {{textDate collection_end}}</p>

        </div>
    </a>
{{/each}}

<!-- Page counter -->
<div class="pagination">
    {{#if totalPages}}
        {{#unless (eq currentPage 1)}}
            <a href="{{queryString query page=1}}" class="pagination-btn arrow">
              <i class="fa-solid fa-angles-left"></i>
            </a>
        {{/unless}}

        {{#if (gt currentPage 1)}}
            <a href="{{queryString query page=(subtract currentPage 1)}}" class="pagination-btn arrow">
              <i class="fa-solid fa-chevron-left"></i>
            </a>
        {{/if}}

        {{#each (paginationRange currentPage totalPages)}}
          <a href="{{queryString ../query page=this}}" class="pagination-btn {{#ifEquals this ../currentPage}}active{{/ifEquals}}">
            {{this}}
          </a>
        {{/each}}

        {{#if (lt currentPage totalPages)}}
            <a href="{{queryString query page=(add currentPage 1)}}" class="pagination-btn arrow">
              <i class="fa-solid fa-chevron-right"></i>
            </a>
        {{/if}}

        {{#unless (eq currentPage totalPages)}}
            <a href="{{queryString query page=totalPages}}" class="pagination-btn arrow">
              <i class="fa-solid fa-angles-right"></i>
            </a>
        {{/unless}}
    {{/if}}
</div>

<!-- Search bar style -->
<style>

.form-section {
  background-color: #fdfdfd;
  padding: 1.5rem;
  border-radius: 12px;
  border: 1px solid #ddd;
  margin: 1rem auto;
  font-family: 'Segoe UI', sans-serif;
  color: #333;
}

.form-section h3 {
  font-size: 1.25rem;
  margin-bottom: 1rem;
  color: #2c3e50;
  display: flex;
  align-items: center;
}

.form-section h3 i {
  margin-right: 0.6rem;
  color: #127009;;
}

.form-section label {
  display: block;
  margin-top: 1rem;
  font-weight: 600;
  font-size: 0.95rem;
}

.entry-count-text {
  color: #555;
  margin: 0;
  font-size: large;
}

</style>